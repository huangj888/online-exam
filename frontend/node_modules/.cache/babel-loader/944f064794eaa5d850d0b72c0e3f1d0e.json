{"remainingRequest":"D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\src\\store\\modules\\user.js","mtime":1683548887954},{"path":"D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\babel.config.js","mtime":1683548887923},{"path":"D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\IT\\projectOfweb\\spring-boot-online-exam\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport Vue from 'vue';\nimport { login, getInfo, logout } from \"../../api/login\";\nimport { ACCESS_TOKEN } from \"../../store/mutation-types\";\nimport { welcome } from \"../../utils/util\";\nvar user = {\n  state: {\n    token: '',\n    name: '',\n    welcome: '',\n    avatar: '',\n    roles: [],\n    info: {}\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_NAME: function SET_NAME(state, _ref) {\n      var name = _ref.name,\n        welcome = _ref.welcome;\n      state.name = name;\n      state.welcome = welcome;\n    },\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    },\n    SET_ROLES: function SET_ROLES(state, roles) {\n      state.roles = roles;\n    },\n    SET_INFO: function SET_INFO(state, info) {\n      state.info = info;\n    }\n  },\n  actions: {\n    // 登录\n    Login: function Login(_ref2, userInfo) {\n      var commit = _ref2.commit;\n      return new Promise(function (resolve, reject) {\n        login(userInfo).then(function (response) {\n          if (response.code === 0) {\n            var token = response.data;\n            // 把接口返回的token字段的值设置到localStorage的token键值对中，token的有效期是1天,Vue.ls中的ls是localStorage的意思\n            Vue.ls.set(ACCESS_TOKEN, token, 24 * 60 * 60 * 1000);\n            // 设置token事件,修改全局变量state中的token值，讲mutations中的SET_TOKEN事件\n            commit('SET_TOKEN', token);\n            resolve();\n          } else {\n            // 自定义错误\n            reject(new Error('用户名或密码错误'));\n          }\n        }).catch(function (error) {\n          console.log(error);\n          reject(error);\n        });\n      });\n    },\n    // 获取用户信息\n    GetInfo: function GetInfo(_ref3) {\n      var commit = _ref3.commit;\n      return new Promise(function (resolve, reject) {\n        getInfo().then(function (response) {\n          console.log('/user/info的响应如下：');\n          console.log(response);\n          var result = response.data; // 取出响应体\n\n          if (result.role && result.role.permissions.length > 0) {\n            // 如果权限\n            var role = result.role;\n            role.permissions = result.role.permissions; // permissions是给页面行为设置权限\n            role.permissions.map(function (per) {\n              if (per.actionEntitySet != null && per.actionEntitySet.length > 0) {\n                var action = per.actionEntitySet.map(function (action) {\n                  return action.action;\n                });\n                per.actionList = action;\n              }\n            });\n            role.permissionList = role.permissions.map(function (permission) {\n              // permissionList是从permissions中遍历解析得来的\n              return permission.permissionId;\n            });\n\n            // 这些设置都在Vuex的getters里面了\n            commit('SET_ROLES', result.role); // 在store中设置用户的权限\n            commit('SET_INFO', result); // 在store中设置用户信息\n          } else {\n            reject(new Error('getInfo: roles must be a non-null array !'));\n          }\n\n          // 这些设置都在Vuex的getters里面了\n          commit('SET_NAME', {\n            name: result.name,\n            welcome: welcome()\n          }); // 设置用户名称\n          commit('SET_AVATAR', result.avatar); // 设置用户头像\n\n          resolve(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 登出\n    Logout: function Logout(_ref4) {\n      var commit = _ref4.commit,\n        state = _ref4.state;\n      return new Promise(function (resolve) {\n        commit('SET_TOKEN', '');\n        commit('SET_ROLES', []);\n        Vue.ls.remove(ACCESS_TOKEN);\n        logout(state.token).then(function () {\n          resolve();\n        }).catch(function () {\n          resolve();\n        });\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"names":["Vue","login","getInfo","logout","ACCESS_TOKEN","welcome","user","state","token","name","avatar","roles","info","mutations","SET_TOKEN","SET_NAME","_ref","SET_AVATAR","SET_ROLES","SET_INFO","actions","Login","_ref2","userInfo","commit","Promise","resolve","reject","then","response","code","data","ls","set","Error","catch","error","console","log","GetInfo","_ref3","result","role","permissions","length","map","per","actionEntitySet","action","actionList","permissionList","permission","permissionId","Logout","_ref4","remove"],"sources":["D:/IT/projectOfweb/spring-boot-online-exam/frontend/src/store/modules/user.js"],"sourcesContent":["import Vue from 'vue'\r\nimport { login, getInfo, logout } from '../../api/login'\r\nimport { ACCESS_TOKEN } from '../../store/mutation-types'\r\nimport { welcome } from '../../utils/util'\r\n\r\nconst user = {\r\n  state: {\r\n    token: '',\r\n    name: '',\r\n    welcome: '',\r\n    avatar: '',\r\n    roles: [],\r\n    info: {}\r\n  },\r\n\r\n  mutations: {\r\n    SET_TOKEN: (state, token) => {\r\n      state.token = token\r\n    },\r\n    SET_NAME: (state, { name, welcome }) => {\r\n      state.name = name\r\n      state.welcome = welcome\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n      state.avatar = avatar\r\n    },\r\n    SET_ROLES: (state, roles) => {\r\n      state.roles = roles\r\n    },\r\n    SET_INFO: (state, info) => {\r\n      state.info = info\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    // 登录\r\n    Login ({ commit }, userInfo) {\r\n      return new Promise((resolve, reject) => {\r\n        login(userInfo).then(response => {\r\n          if (response.code === 0) {\r\n            const token = response.data\r\n            // 把接口返回的token字段的值设置到localStorage的token键值对中，token的有效期是1天,Vue.ls中的ls是localStorage的意思\r\n            Vue.ls.set(ACCESS_TOKEN, token, 24 * 60 * 60 * 1000)\r\n            // 设置token事件,修改全局变量state中的token值，讲mutations中的SET_TOKEN事件\r\n            commit('SET_TOKEN', token)\r\n            resolve()\r\n          } else {\r\n            // 自定义错误\r\n            reject(new Error('用户名或密码错误'))\r\n          }\r\n        }).catch(error => {\r\n          console.log(error)\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    // 获取用户信息\r\n    GetInfo ({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        getInfo().then(response => {\r\n          console.log('/user/info的响应如下：')\r\n          console.log(response)\r\n          const result = response.data // 取出响应体\r\n\r\n          if (result.role && result.role.permissions.length > 0) { // 如果权限\r\n            const role = result.role\r\n            role.permissions = result.role.permissions // permissions是给页面行为设置权限\r\n            role.permissions.map(per => {\r\n              if (per.actionEntitySet != null && per.actionEntitySet.length > 0) {\r\n                const action = per.actionEntitySet.map(action => {\r\n                  return action.action\r\n                })\r\n                per.actionList = action\r\n              }\r\n            })\r\n            role.permissionList = role.permissions.map(permission => { // permissionList是从permissions中遍历解析得来的\r\n              return permission.permissionId\r\n            })\r\n\r\n            // 这些设置都在Vuex的getters里面了\r\n            commit('SET_ROLES', result.role) // 在store中设置用户的权限\r\n            commit('SET_INFO', result) // 在store中设置用户信息\r\n          } else {\r\n            reject(new Error('getInfo: roles must be a non-null array !'))\r\n          }\r\n\r\n          // 这些设置都在Vuex的getters里面了\r\n          commit('SET_NAME', { name: result.name, welcome: welcome() }) // 设置用户名称\r\n          commit('SET_AVATAR', result.avatar) // 设置用户头像\r\n\r\n          resolve(response)\r\n        }).catch(error => {\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    // 登出\r\n    Logout ({ commit, state }) {\r\n      return new Promise((resolve) => {\r\n        commit('SET_TOKEN', '')\r\n        commit('SET_ROLES', [])\r\n        Vue.ls.remove(ACCESS_TOKEN)\r\n\r\n        logout(state.token).then(() => {\r\n          resolve()\r\n        }).catch(() => {\r\n          resolve()\r\n        })\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default user\r\n"],"mappings":"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"}]}